<!DOCTYPE html>



<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="alternate" href="/index.xml" type="application/rss+xml" title="Raytheon Pivotal Workshops">
		<link rel="icon" href="/favicon.ico">
		<title>Lab101 - Raytheon Pivotal Workshops</title>
		<link rel="stylesheet" href="/css/highlight.js.min.css">
		<link rel="stylesheet" href="/css/bootstrap.min.css">
		<link rel="stylesheet" href="/css/bootstrap-theme.css">
		<link rel="stylesheet" href="/css/pui-v2.0.0/pivotal-ui.css">
		<link rel="stylesheet" href="/css/theme.css">
		<link rel="stylesheet" href="/css/component.css">

<link rel="stylesheet"  href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.1.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="/css/bootie-docs.css">
		<script src="http://raytheon.cfapps.io/js/modernizr.custom.js"></script>

		
		<style type="text/css">
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
		</style>
	</head>

<body role="document">
	
	
	<nav class="navbar navbar-inverse navbar-fixed-top  ">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<div class="nav navbar-brand">
						
							<img class="nav pivotal-logo" src="/Pivotal_Teal.png"/>
						
				</div>
				<a class="navbar-brand navbar-txt" href="/">Raytheon Pivotal Workshops </a>
			</div>
			<div id="navbar" class="navbar-collapse collapse">
				<ul class="nav navbar-nav">
			
				
				
					
					<li ><a class="navbar-txt" href="/lab_requirements">Lab_requirements</a></li>
				
					
					<li ><a class="navbar-txt" href="/billerica_day1">Billerica_day1</a></li>
				
					
					<li ><a class="navbar-txt" href="/billerica_day2">Billerica_day2</a></li>
				
					
					<li ><a class="navbar-txt" href="/billerica_day3">Billerica_day3</a></li>
				
					
					<li ><a class="navbar-txt" href="/cloud_tig">Cloud_tig</a></li>
				
			
			
				<li class="dropdown">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Resources<span class="caret"></span></a>
					<ul class="dropdown-menu" role="menu">
					
                        <li><a target="_blank" href="https://www.youtube.com/playlist?list=PLAdzTan_eSPQ1fuLSBhyB4eEZF7JQM0Mx">All SpringOne Conference Videos</a></li>
                     
                        <li><a target="_blank" href="http://pivotal.io/platform/pcf-tutorials/getting-started-with-pivotal-cloud-foundry-dev/introduction">Try PCF on your Local Workstation with PCF Dev</a></li>
                     
                        <li><a target="_blank" href="http://pivotal.io/platform/pcf-tutorials/getting-started-with-pivotal-cloud-foundry/introduction">Try PCF on the Public Cloud</a></li>
                     
                        <li><a target="_blank" href="/CorporateOverview.pdf">Pivotal Overview</a></li>
                     
                        <li><a target="_blank" href="https://network.pivotal.io/products/pcfdev">PCF Dev</a></li>
                     
                        <li><a target="_blank" href="https://docs.pivotal.io/pivotalcf">PCF Documentation</a></li>
                     
                        <li><a target="_blank" href="https://docs.pivotal.io/pivotalcf/cf-cli/getting-started.html">CF CLI Documentation</a></li>
                     
                        <li><a target="_blank" href="https://www.git-scm.com">Git</a></li>
                     
                        <li><a target="_blank" href="https://try.github.io/levels/1/challenges/1">Git Lessons</a></li>
                     
                        <li><a target="_blank" href="http://platform.spring.io/platform/">Spring Platform</a></li>
                     
                        <li><a target="_blank" href="https://spring.io/docs">Spring Docs</a></li>
                     
                        <li><a target="_blank" href="http://start.spring.io/">Spring Initializer</a></li>
                     
                        <li><a target="_blank" href="https://spring.io/blog/2015/10/19/springone2gx-2015-replay-spring-cloud-at-netflix">Spring Cloud at Netflix</a></li>
                     
                        <li><a target="_blank" href="https://spring.io/blog/2015/07/14/microservices-with-spring">Microservices with Spring</a></li>
                     
                        <li><a target="_blank" href="https://spring.io/guides#tutorials">Spring Guides</a></li>
                     
                        <li><a target="_blank" href="https://network.pivotal.io/">Pivotal Network</a></li>
                     
                        <li><a target="_blank" href="http://docs.pivotal.io">Pivotal Documentation</a></li>
                     
					</ul>
				</li>
			
			
				<li class="dropdown">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Books<span class="caret"></span></a>
					<ul class="dropdown-menu" role="menu">
					
                        <li><a target="_blank" href="/books/Beyond_the_12-Factor_App_Pivotal.pdf">Beyond the 12-Factor App</a></li>
                     
                        <li><a target="_blank" href="/books/Migrating_to_Cloud-Native_App_Architectures_Pivotal.pdf">Migrating to Cloud Native Application Architectures</a></li>
                     
                        <li><a target="_blank" href="/books/Cloud_Foundry_The_Cloud_Native_Platform_Pivotal.pdf">Cloud Foundry The Cloud Native Platform</a></li>
                     
                        <li><a target="_blank" href="http://www.amazon.com/Cloud-Native-Java-Designing-Resilient/dp/1449374646">Cloud Native Java: Designing Resilient Systems with Spring Boot, Spring Cloud, and Cloud Foundry</a></li>
                     
					</ul>
				</li>
			
				
                        
				</ul>
			</div>
		</div>
	</nav>

<div class="container" style="width:95%; padding:5">
	<div class="row">

	    		
		<div class="doc-sidebar" style="width:30%; margin-top:0; float:right; padding:10px;">
			<div class="sidebar-module">
				
		    	<div class="tag-box bg-dark-11" style="padding:10px; margin:20px;">
		    	<h4 class="type-brand-3">Books</h4>
		    	<ul class="list-unstyled">
		    	
		    	<li><a target="_blank" href="/books/Beyond_the_12-Factor_App_Pivotal.pdf">Beyond the 12-Factor App</a><p></p></li>	
		    	
		    	<li><a target="_blank" href="/books/Migrating_to_Cloud-Native_App_Architectures_Pivotal.pdf">Migrating to Cloud Native Application Architectures</a><p></p></li>	
		    	
		    	<li><a target="_blank" href="/books/Cloud_Foundry_The_Cloud_Native_Platform_Pivotal.pdf">Cloud Foundry The Cloud Native Platform</a><p></p></li>	
		    	
		    	<li><a target="_blank" href="http://www.amazon.com/Cloud-Native-Java-Designing-Resilient/dp/1449374646">Cloud Native Java: Designing Resilient Systems with Spring Boot, Spring Cloud, and Cloud Foundry</a><p></p></li>	
		    	
		    	</ul>
		  	</div>
                        <div class="tag-box bg-dark-11" style="padding:10px; margin:20px;">
                        <h4 class="type-brand-3">Resources</h4>
                        <ul class="list-unstyled">
                        
                            <li><a target="_blank" href="https://www.youtube.com/playlist?list=PLAdzTan_eSPQ1fuLSBhyB4eEZF7JQM0Mx">All SpringOne Conference Videos</a><p></p></li>
                        
                            <li><a target="_blank" href="http://pivotal.io/platform/pcf-tutorials/getting-started-with-pivotal-cloud-foundry-dev/introduction">Try PCF on your Local Workstation with PCF Dev</a><p></p></li>
                        
                            <li><a target="_blank" href="http://pivotal.io/platform/pcf-tutorials/getting-started-with-pivotal-cloud-foundry/introduction">Try PCF on the Public Cloud</a><p></p></li>
                        
                            <li><a target="_blank" href="/CorporateOverview.pdf">Pivotal Overview</a><p></p></li>
                        
                            <li><a target="_blank" href="https://network.pivotal.io/products/pcfdev">PCF Dev</a><p></p></li>
                        
                            <li><a target="_blank" href="https://docs.pivotal.io/pivotalcf">PCF Documentation</a><p></p></li>
                        
                            <li><a target="_blank" href="https://docs.pivotal.io/pivotalcf/cf-cli/getting-started.html">CF CLI Documentation</a><p></p></li>
                        
                            <li><a target="_blank" href="https://www.git-scm.com">Git</a><p></p></li>
                        
                            <li><a target="_blank" href="https://try.github.io/levels/1/challenges/1">Git Lessons</a><p></p></li>
                        
                            <li><a target="_blank" href="http://platform.spring.io/platform/">Spring Platform</a><p></p></li>
                        
                            <li><a target="_blank" href="https://spring.io/docs">Spring Docs</a><p></p></li>
                        
                            <li><a target="_blank" href="http://start.spring.io/">Spring Initializer</a><p></p></li>
                        
                            <li><a target="_blank" href="https://spring.io/blog/2015/10/19/springone2gx-2015-replay-spring-cloud-at-netflix">Spring Cloud at Netflix</a><p></p></li>
                        
                            <li><a target="_blank" href="https://spring.io/blog/2015/07/14/microservices-with-spring">Microservices with Spring</a><p></p></li>
                        
                            <li><a target="_blank" href="https://spring.io/guides#tutorials">Spring Guides</a><p></p></li>
                        
                            <li><a target="_blank" href="https://network.pivotal.io/">Pivotal Network</a><p></p></li>
                        
                            <li><a target="_blank" href="http://docs.pivotal.io">Pivotal Documentation</a><p></p></li>
                        
                        </ul>
                        </div>
			</div>
		</div>
		


		<div class="col-sm-8 doc-main" style="width:70%; float:left; padding:30px;">
			<main role="main">
				<article>
					<a id="title"></a>
					<div class="doc-entry-meta">
					</div>
					<section>
						<div class="sect1">
<h2 id="_lab_3_pushing_your_first_asp_net_core_application">Lab 3 - Pushing Your First ASP.NET Core Application</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_code_goal_code"><code>Goal</code></h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">In this lab, we&#8217;ll do the following</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>We will deploy a ASP.NET Core app</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Approximate time: 10 minutes</p>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The completed code for this lab can be found at <code>$COURSE_HOME/dotnet/lab01/</code>.
</td>
</tr>
</table>
</div>
<div class="quoteblock abstract">
<blockquote>
<div class="paragraph">
<p>In this lab we will push a pre-built ASP.NET Core MVC application to Cloud Foundry. The application makes use of the Steeltoe CloudFoundry Configuration provider to parse the configuration data and make it available to the application as configurtaion data.</p>
</div>
<div class="paragraph">
<p>Note: We will use this same application for all of the rest of the labs in this section of the workshop (i.e. labs1-4).</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_app">The App</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is the first application we will look at that is leveraging Steeltoe.</p>
</div>
<div class="paragraph">
<p>This application was created using the out of the box ASP.NET Core MVC template found in the dotnet CLI. It makes use of the Steeltoe Configuration provider called <a href="https://github.com/SteeltoeOSS/Configuration/tree/master/src/Steeltoe.Extensions.Configuration.CloudFoundry">CloudFoundry</a>. This provider enables the CloudFoundry environment variables, <code>VCAP_APPLICATION</code>, <code>VCAP_SERVICES</code> and <code>CF_*</code> to be parsed and accessed as configuration data within a .NET application.</p>
</div>
<div class="paragraph">
<p>When Microsoft developed ASP.NET Core, the next generation of ASP.NET, they created a number of new <code>Extension</code> frameworks that provide services(e.g. Configuration, Logging, Dependency Injection, etc) commonly used/needed when building applications. While these <code>Extensions</code> certainly can be used in ASP.NET Core apps, they can also be leveraged in other app types including ASP.NET 4, Console Apps, UWP Apps, etc.</p>
</div>
<div class="paragraph">
<p>With Steeltoe, we have added to the Microsoft <a href="https://github.com/aspnet/Configuration">Configuration Extension providers</a> by adding two additional providers:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://github.com/SteeltoeOSS/Configuration/tree/master/src/Steeltoe.Extensions.Configuration.CloudFoundry">CloudFoundry</a> Configuration provider</p>
</li>
<li>
<p><a href="https://github.com/SteeltoeOSS/Configuration/tree/master/src/Steeltoe.Extensions.Configuration.ConfigServer">Config Server Client</a> Configuration provider</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To get a better understanding of the <code>Microsoft Configuration Extensions</code> have a look at the <a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/configuration">ASP.NET Core Documentation</a>.</p>
</div>
<div class="paragraph">
<p>As you might expect, virtually all of Steeltoe components make use of the CloudFoundry configuration provider in one way or another.</p>
</div>
<div class="paragraph">
<p>Later on in the workshop we will take a closer look at the <code>Configuration Extensions</code>  and the <code>Steeltoe CloudFoundry Configuration provider</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_code_exercise_code"><code>Exercise</code></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_code_publish_and_push_it_code"><code>Publish and Push It!</code></h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a command prompt and cd <em>Workshop/Session-01/Lab01/CloudFoundry</em></p>
<div class="listingblock">
<div class="content">
<pre>&gt; cd $COURSE_HOME/dotnet/lab01/CloudFoundry</pre>
</div>
</div>
</li>
<li>
<p>Restore the NuGet references</p>
<div class="listingblock">
<div class="content">
<pre>&gt; dotnet restore --configfile nuget.config</pre>
</div>
</div>
</li>
<li>
<p>Publish the application.</p>
<div class="listingblock">
<div class="content">
<pre>&gt; Windows: dotnet publish -o %CD%\publish -r ubuntu.14.04-x64

&gt; Mac/Linux: dotnet publish -o $PWD/publish -r ubuntu.14.04-x64</pre>
</div>
</div>
</li>
<li>
<p>Push the application!</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Make sure you deleted the previous 'env' app
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; Windows: cf push -f manifest.yml -p %CD%/publish

&gt; Mac/Linux: cf push -f manifest.yml -p $PWD/publish</pre>
</div>
</div>
<div class="paragraph">
<p>You should see output similar to the following listing. Take a look at the listing callouts for a play-by-play of what&#8217;s happening:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>Using manifest file manifest.yml

Creating app env in org test / space test as admin...
OK

Creating route env-peperine-flannelette.apps.testcloud.com...
OK

Binding env-peperine-flannelette.apps.testcloud.com to env...
OK

Uploading env...
Uploading app files from: /Users/DaveT/workspace/dotnet/Workshop/Session-01/Lab01/CloudFoundry/publish/
Uploading 9.6M, 291 files
Done uploading
OK

Starting app env in org test / space test as admin...
Downloading binary_buildpack...
Downloading nodejs_buildpack...
Downloading staticfile_buildpack...
Downloading java_buildpack_offline...
Downloading ruby_buildpack...
Downloaded java_buildpack_offline
Downloading python_buildpack...
Downloaded staticfile_buildpack
Downloading go_buildpack...
Downloaded nodejs_buildpack
Downloading php_buildpack...
Downloaded binary_buildpack
Downloaded ruby_buildpack
Downloading dotnet_core_buildpack...
Downloaded go_buildpack
Downloaded php_buildpack
Downloaded dotnet_core_buildpack
Downloaded python_buildpack
Creating container
Successfully created container
Downloading app package...
Downloaded app package (24M)
Staging...
-----&gt; Buildpack version 1.0.12
ASP.NET Core buildpack version: 1.0.12
ASP.NET Core buildpack starting compile
-----&gt; Restoring files from buildpack cache
       OK
-----&gt; Restoring NuGet packages cache
       OK
-----&gt; Extracting libunwind
       libunwind version: 1.2
       file:///tmp/buildpacks/0d9923c85070a88b0dde407ea8202d62/dependencies/https___buildpacks.cloudfoundry.org_dependencies_manual-binaries_dotnet_libunwind-1.2-linux-x64-f56347d4.tgz
       OK
-----&gt; Saving to buildpack cache
       Copied 38 files from /tmp/app/libunwind to /tmp/cache
       OK
-----&gt; Cleaning staging area
       OK
ASP.NET Core buildpack is done creating the droplet
Exit status 0
Staging complete
Uploading droplet, build artifacts cache...
Uploading droplet...
Uploading build artifacts cache...
Uploaded build artifacts cache (992K)
Uploaded droplet (24.2M)
Uploading complete
Destroying container
Successfully destroyed container

1 of 1 instances running

App started


OK

App env was started using this command `cd . &amp;&amp; ./CloudFoundry --server.urls http://0.0.0.0:${PORT}`

Showing health and status for app env in org test / space test as admin...
OK

requested state: started
instances: 1/1
usage: 1G x 1 instances
urls: env-peperine-flannelette.apps.testcloud.com
last uploaded: Wed Mar 15 20:57:22 UTC 2017
stack: cflinuxfs2
buildpack: ASP.NET Core (buildpack-1.0.12)

     state     since                    cpu    memory    disk      details
#0   running   2017-03-15 02:57:55 PM   0.0%   0 of 1G   0 of 1G</pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The CLI is using a manifest to provide necessary configuration details such as application name, memory to be allocated, the stack to be used (in this case Linux), the number of instances requested to start, and path to the application artifact.
In Visual Studio, take a look at <code>manifest.yml</code> to see how.</p>
</li>
<li>
<p>In most cases, the CLI indicates each Cloud Foundry API call as it happens.
In this case, the CLI has created an application record for <em>env</em> in your assigned space.</p>
</li>
<li>
<p>All HTTP/HTTPS requests to applications will flow through Cloud Foundry&#8217;s front-end router called <a href="https://docs.pivotal.io/pivotalcf/1-7/concepts/architecture/router.html">(Go)Router</a>.
Here the CLI is creating a route with random word tokens inserted (again, see <code>manifest.yml</code> for a hint!) to prevent route collisions across the default <code>apps.testcloud.com</code> domain.</p>
</li>
<li>
<p>Now the CLI is <em>binding</em> the created route to the application.
Routes can actually be bound to multiple applications to support techniques such as <a href="https://docs.pivotal.io/pivotalcf/1-7/devguide/deploy-apps/blue-green.html">blue-green deployments</a>.</p>
</li>
<li>
<p>The CLI finally uploads the application bits to Pivotal Cloud Foundry. Notice that it&#8217;s uploading <em>39 files</em>! This is because Cloud Foundry actually uploads all the files for the deployment for caching purposes.</p>
</li>
<li>
<p>Now we begin the staging process. By choosing the Linux stack a container is created on the runtime to prepare the application to run, a second container is then generated that will host your application.  If you want to try with other languages you can push an application.</p>
</li>
<li>
<p>The complete package of your application and all of its necessary runtime components is called a <em>droplet</em>.
Here the droplet is being uploaded to Pivotal Cloudfoundry&#8217;s internal blobstore so that it can be easily copied to one or more Cells in the <em><a href="https://docs.pivotal.io/pivotalcf/1-7/concepts/diego/diego-architecture.html">Diego Architecture</a></em> for execution.</p>
</li>
<li>
<p>The CLI tells you exactly what command and argument set was used to start your application.</p>
</li>
<li>
<p>Finally the CLI reports the current status of your application&#8217;s health.</p>
</li>
</ol>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_view_the_app_in_appsmanager">View the App in AppsManager</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open AppManager and select your org and space:</p>
<div class="paragraph">
<p><span class="image"><img src="/images/lab-01-appsmanager.png" alt="lab 01 appsmanager"></span></p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><br>
. Select the <code>env</code> application and then select the <code>Env Variables</code> tab.</p>
</div>
<div class="paragraph">
<p>+
image::/images/lab-01-appsmanager-env-variables.png[]
<br>
Notice the environment variables <code>VCAP_APPLICATION</code> and <code>VCAP_SERVICES</code>. These are assigned by CloudFoundry and are meant to provide configuration data for the application:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Environment Variables:
{
  "staging_env_json": {},
  "running_env_json": {},
  "environment_json": "invalid_key",
  "system_env_json": {
    "VCAP_SERVICES": {}
  },
  "application_env_json": {
    "VCAP_APPLICATION": {
      "cf_api": "https://api.system.testcloud.com",
      "limits": {
        "fds": 16384,
        "mem": 1024,
        "disk": 1024
      },
      "application_name": "env",
      "application_uris": [
        "env-uninebriating-impaler.apps.testcloud.com"
      ],
      "name": "env",
      "space_name": "test",
      "space_id": "86111584-e059-4eb0-b2e6-c89aa260453c",
      "uris": [
        "env-uninebriating-impaler.apps.testcloud.com"
      ],
      "users": null,
      "application_id": "c21b464e-243a-43fc-86b2-1545c90e2239",
      "version": "e5f8aff9-4434-4f54-a4c4-c84569c3d8b3",
      "application_version": "e5f8aff9-4434-4f54-a4c4-c84569c3d8b3"
    }
  }
}</pre>
</div>
</div>
<div class="paragraph">
<p>You will see in a bit that the Steeltoe CloudFoundry Configuration provider parses this information and makes if available as configuration data to the application.</p>
</div>
<div class="sect2">
<h3 id="_code_interact_with_the_app_code"><code>Interact with the App</code></h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Visit the application in your browser by hitting the route that was generated by the CLI:</p>
<div class="imageblock">
<div class="content">
<img src="/images/lab-net.png" alt="lab net">
</div>
</div>
<div class="paragraph">
<p><br></p>
</div>
</li>
<li>
<p>Click on the <code>CloudFoundry Config</code> menu item:</p>
<div class="imageblock">
<div class="content">
<img src="/images/lab-01-cloudfoundry-config.png" alt="lab 01 cloudfoundry config">
</div>
</div>
<div class="paragraph">
<p><br>
What you are seeing here is the configuration information from <code>VCAP_APPLICATION</code> and <code>VCAP_SERVICES</code>.
Take some time and see if you can find in the code how this is accomplished.
Start with the <code>CloudFoundryConfig()</code> action in the <code>HomeController</code>.</p>
</div>
</li>
<li>
<p>Click on the <code>Application Config</code> menu item:</p>
<div class="imageblock">
<div class="content">
<img src="/images/lab-01-application-config.png" alt="lab 01 application config">
</div>
</div>
<div class="paragraph">
<p><br>
What you are seeing here is the configuration information from <code>appsettings.json</code> and <code>appsettings-development.json</code>, both configuration files found in the application solution.
Take some time and see if you can find in the code how this is accomplished.
Start with the <code>AppConfig()</code> action in the <code>HomeController</code>.</p>
</div>
</li>
<li>
<p>Click on the <code>Subsection Config</code> menu item:</p>
<div class="imageblock">
<div class="content">
<img src="/images/lab-01-subsection-config.png" alt="lab 01 subsection config">
</div>
</div>
<div class="paragraph">
<p><br>
What you are seeing here is the configuration information from a  subsection of <code>appsettings.json</code> and <code>appsettings-development.json</code>.
Take some time and see if you can find in the code how this is accomplished.
Start with the <code>SubSectionConfig()</code> action in the <code>HomeController</code>.</p>
</div>
</li>
<li>
<p>Click on the <code>Raw Config</code> menu item:</p>
<div class="imageblock">
<div class="content">
<img src="/images/lab-01-raw-config.png" alt="lab 01 raw config">
</div>
</div>
<div class="paragraph">
<p><br>
What you are seeing here is the raw listing of all the configuration information available to the application.
Take some time and see if you can find in the code how this is accomplished.
Start with the <code>RawConfig()</code> action in the <code>HomeController</code>.</p>
</div>
</li>
<li>
<p>To get an understanding on how the configurtion for the app is created from all the different sources have a look at the <code>Startup</code> class in project folder and the method <code>ConfigureServices(IServiceCollection services)</code>.
See if you can figure out how Steeltoe is used to add to the Configuration.  In later labs we will explore this in more depth.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_interact_with_app_from_cf_cli">Interact with App from CF CLI</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Get information about the currently deployed application using CLI apps command:</p>
<div class="listingblock">
<div class="content">
<pre>&gt; cf apps</pre>
</div>
</div>
<div class="paragraph">
<p>Note the application name for next steps</p>
</div>
</li>
<li>
<p>Get information about running instances, memory, CPU, and other statistics using CLI instances command</p>
<div class="listingblock">
<div class="content">
<pre>&gt; cf app env</pre>
</div>
</div>
</li>
<li>
<p>Stop the deployed application using the CLI</p>
<div class="listingblock">
<div class="content">
<pre>&gt; cf stop env</pre>
</div>
</div>
</li>
<li>
<p>Delete the deployed application using the CLI</p>
<div class="listingblock">
<div class="content">
<pre>&gt; cf delete env</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>

					</section>
				</article>
			</main>
		</div> 
	</div> 
</div>

		




<hr />
<div class="container">
	<div class="row">
		<div class="col-sm-8">
			<p class="doc-footer-em"><a href="#">Back to TOP</a></p>
		</div>
	</div>

</div> 
          
<footer class="doc-footer">
        <span>Last Updated on  2016-03-23 19:58:14 -0400 EDT  </span>
	
	<p>Copyright (c) 2015, Pivotal; All rights reserved.</p>
</footer>



<script src="/js/jquery-1.11.2.min.js"></script>
<script src="/js/bootstrap.min.js"></script>

<script src="/js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="/js/ie10-viewport-bug-workaround.js"></script>
		<script>
			var $event = $.event,
			$special,
			resizeTimeout;
			$special = $event.special.debouncedresize = {
				setup: function() {
					$( this ).on( "resize", $special.handler );
				},
				teardown: function() {
					$( this ).off( "resize", $special.handler );
				},
				handler: function( event, execAsap ) {
					var context = this,
						args = arguments,
						dispatch = function() {
							event.type = "debouncedresize";
							$event.dispatch.apply( context, args );
						};
					if ( resizeTimeout ) {
						clearTimeout( resizeTimeout );
					}
					execAsap ?
						dispatch() :
						resizeTimeout = setTimeout( dispatch, $special.threshold );
				},
				threshold: 250
			};
			var BLANK = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==';
			$.fn.imagesLoaded = function( callback ) {
				var $this = this,
					deferred = $.isFunction($.Deferred) ? $.Deferred() : 0,
					hasNotify = $.isFunction(deferred.notify),
					$images = $this.find('img').add( $this.filter('img') ),
					loaded = [],
					proper = [],
					broken = [];
				if ($.isPlainObject(callback)) {
					$.each(callback, function (key, value) {
						if (key === 'callback') {
							callback = value;
						} else if (deferred) {
							deferred[key](value);
						}
					});
				}
				function doneLoading() {
					var $proper = $(proper),
						$broken = $(broken);
					if ( deferred ) {
						if ( broken.length ) {
							deferred.reject( $images, $proper, $broken );
						} else {
							deferred.resolve( $images );
						}
					}
					if ( $.isFunction( callback ) ) {
						callback.call( $this, $images, $proper, $broken );
					}
				}
				function imgLoaded( img, isBroken ) {
					if ( img.src === BLANK || $.inArray( img, loaded ) !== -1 ) {
						return;
					}
					loaded.push( img );
					if ( isBroken ) {
						broken.push( img );
					} else {
						proper.push( img );
					}
					$.data( img, 'imagesLoaded', { isBroken: isBroken, src: img.src } );
					if ( hasNotify ) {
						deferred.notifyWith( $(img), [ isBroken, $images, $(proper), $(broken) ] );
					}
					if ( $images.length === loaded.length ){
						setTimeout( doneLoading );
						$images.unbind( '.imagesLoaded' );
					}
				}
				if ( !$images.length ) {
					doneLoading();
				} else {
					$images.bind( 'load.imagesLoaded error.imagesLoaded', function( event ){
						imgLoaded( event.target, event.type === 'error' );
					}).each( function( i, el ) {
						var src = el.src;
						var cached = $.data( el, 'imagesLoaded' );
						if ( cached && cached.src === src ) {
							imgLoaded( el, cached.isBroken );
							return;
						}
						if ( el.complete && el.naturalWidth !== undefined ) {
							imgLoaded( el, el.naturalWidth === 0 || el.naturalHeight === 0 );
							return;
						}
						if ( el.readyState || el.complete ) {
							el.src = BLANK;
							el.src = src;
						}
					});
				}
				return deferred ? deferred.promise( $this ) : $this;
			};
			var Grid = (function() {
				var $grid = $( '#og-grid' ),
					$items = $grid.children( 'li' ),
					current = -1,
					previewPos = -1,
					scrollExtra = 0,
					marginExpanded = 10,
					$window = $( window ), winsize,
					$body = $( 'html, body' ),
					transEndEventNames = {
						'WebkitTransition' : 'webkitTransitionEnd',
						'MozTransition' : 'transitionend',
						'OTransition' : 'oTransitionEnd',
						'msTransition' : 'MSTransitionEnd',
						'transition' : 'transitionend'
					},
					transEndEventName = transEndEventNames[ Modernizr.prefixed( 'transition' ) ],
					support = Modernizr.csstransitions,
					settings = {
						minHeight : 500,
						speed : 350,
						easing : 'ease'
					};
				function init( config ) {
					
					settings = $.extend( true, {}, settings, config );
					$grid.imagesLoaded( function() {
						saveItemInfo( true );
						getWinSize();
						initEvents();
					} );
				}
				function addItems( $newitems ) {
					$items = $items.add( $newitems );
					$newitems.each( function() {
						var $item = $( this );
						$item.data( {
							offsetTop : $item.offset().top,
							height : $item.height()
						} );
					} );
					initItemsEvents( $newitems );
				}
				function saveItemInfo( saveheight ) {
					$items.each( function() {
						var $item = $( this );
						$item.data( 'offsetTop', $item.offset().top );
						if( saveheight ) {
							$item.data( 'height', $item.height() );
						}
					} );
				}
				function initEvents() {
					
					initItemsEvents( $items );
					
					$window.on( 'debouncedresize', function() {
						
						scrollExtra = 0;
						previewPos = -1;
						saveItemInfo();
						getWinSize();
						var preview = $.data( this, 'preview' );
						if( typeof preview != 'undefined' ) {
							hidePreview();
						}
					} );
				}
				function initItemsEvents( $items ) {
					$items.on( 'click', 'span.og-close', function() {
						hidePreview();
						return false;
					} ).children( 'a' ).on( 'click', function(e) {
						var $item = $( this ).parent();
						current === $item.index() ? hidePreview() : showPreview( $item );
						return false;
					} );
				}
				function getWinSize() {
					winsize = { width : $window.width(), height : $window.height() };
				}
				function showPreview( $item ) {
					var preview = $.data( this, 'preview' ),
						position = $item.data( 'offsetTop' );
					scrollExtra = 0;
					if( typeof preview != 'undefined' ) {
						if( previewPos !== position ) {
							if( position > previewPos ) {
								scrollExtra = preview.height;
							}
							hidePreview();
						}
						else {
							preview.update( $item );
							return false;
						}
						
					}
					previewPos = position;
					preview = $.data( this, 'preview', new Preview( $item ) );
					preview.open();
				}
				function hidePreview() {
					current = -1;
					var preview = $.data( this, 'preview' );
					preview.close();
					$.removeData( this, 'preview' );
				}
				function Preview( $item ) {
					this.$item = $item;
					this.expandedIdx = this.$item.index();
					this.create();
					this.update();
				}
				Preview.prototype = {
					create : function() {
						this.$title = $( '<h3></h3>' );
						this.$description = $( '<p></p>' );
						this.$href = $( '<a href="#"></a>' );
						this.$details = $( '<div class="og-details"></div>' ).append( this.$title, this.$description, this.$href );
						this.$loading = $( '<div class="og-loading"></div>' );
						this.$fullimage = $( '<div class="og-fullimg"></div>' ).append( this.$loading );
						this.$closePreview = $( '<span class="og-close"></span>' );
						this.$previewInner = $( '<div class="og-expander-inner"></div>' ).append( this.$closePreview, this.$fullimage, this.$details );
						this.$previewEl = $( '<div class="og-expander"></div>' ).append( this.$previewInner );
						this.$item.append( this.getEl() );
						if( support ) {
							this.setTransition();
						}
					},
					update : function( $item ) {
						if( $item ) {
							this.$item = $item;
						}
						
						if( current !== -1 ) {
							var $currentItem = $items.eq( current );
							$currentItem.removeClass( 'og-expanded' );
							this.$item.addClass( 'og-expanded' );
							this.positionPreview();
						}
						current = this.$item.index();
						var $itemEl = this.$item.children( 'a' ),
							eldata = {
								href : $itemEl.attr( 'href' ),
								largesrc : $itemEl.data( 'largesrc' ),
								title : $itemEl.data( 'title' ),
								description : $itemEl.data( 'description' )
							};
						this.$title.html( eldata.title );
						this.$description.html( eldata.description );
						this.$href.attr( 'href', eldata.href );
						var self = this;
						
						if( typeof self.$largeImg != 'undefined' ) {
							self.$largeImg.remove();
						}
						if( self.$fullimage.is( ':visible' ) ) {
							this.$loading.show();
							$( '<img/>' ).load( function() {
								var $img = $( this );
								if( $img.attr( 'src' ) === self.$item.children('a').data( 'largesrc' ) ) {
									self.$loading.hide();
									self.$fullimage.find( 'img' ).remove();
									self.$largeImg = $img.fadeIn( 350 );
									self.$fullimage.append( self.$largeImg );
								}
							} ).attr( 'src', eldata.largesrc );	
						}
					},
					open : function() {
						setTimeout( $.proxy( function() {	
							this.setHeights();
							this.positionPreview();
						}, this ), 25 );
					},
					close : function() {
						var self = this,
							onEndFn = function() {
								if( support ) {
									$( this ).off( transEndEventName );
								}
								self.$item.removeClass( 'og-expanded' );
								self.$previewEl.remove();
							};
						setTimeout( $.proxy( function() {
							if( typeof this.$largeImg !== 'undefined' ) {
								this.$largeImg.fadeOut( 'fast' );
							}
							this.$previewEl.css( 'height', 0 );
							var $expandedItem = $items.eq( this.expandedIdx );
							$expandedItem.css( 'height', $expandedItem.data( 'height' ) ).on( transEndEventName, onEndFn );
							if( !support ) {
								onEndFn.call();
							}
						}, this ), 25 );
						
						return false;
					},
					calcHeight : function() {
						var heightPreview = winsize.height - this.$item.data( 'height' ) - marginExpanded,
							itemHeight = winsize.height;
						if( heightPreview < settings.minHeight ) {
							heightPreview = settings.minHeight;
							itemHeight = settings.minHeight + this.$item.data( 'height' ) + marginExpanded;
						}
						this.height = heightPreview;
						this.itemHeight = itemHeight;
					},
					setHeights : function() {
						var self = this,
							onEndFn = function() {
								if( support ) {
									self.$item.off( transEndEventName );
								}
								self.$item.addClass( 'og-expanded' );
							};
						this.calcHeight();
						this.$previewEl.css( 'height', this.height );
						this.$item.css( 'height', this.itemHeight ).on( transEndEventName, onEndFn );
						if( !support ) {
							onEndFn.call();
						}
					},
					positionPreview : function() {
						var position = this.$item.data( 'offsetTop' ),
							previewOffsetT = this.$previewEl.offset().top - scrollExtra,
							scrollVal = this.height + this.$item.data( 'height' ) + marginExpanded <= winsize.height ? position : this.height < winsize.height ? previewOffsetT - ( winsize.height - this.height ) : previewOffsetT;
						
						$body.animate( { scrollTop : scrollVal }, settings.speed );
					},
					setTransition  : function() {
						this.$previewEl.css( 'transition', 'height ' + settings.speed + 'ms ' + settings.easing );
						this.$item.css( 'transition', 'height ' + settings.speed + 'ms ' + settings.easing );
					},
					getEl : function() {
						return this.$previewEl;
					}
				}
				return { 
					init : init,
					addItems : addItems
				};
			})();
		</script>
		<script>
			$(function() {
				Grid.init();
			});
		</script>
</body>
</html>

