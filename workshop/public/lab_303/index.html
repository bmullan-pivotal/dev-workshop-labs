<!DOCTYPE html>



<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="alternate" href="/index.xml" type="application/rss+xml" title="Raytheon Pivotal Workshops">
		<link rel="icon" href="/favicon.ico">
		<title>Lab03 - Raytheon Pivotal Workshops</title>
		<link rel="stylesheet" href="/css/highlight.js.min.css">
		<link rel="stylesheet" href="/css/bootstrap.min.css">
		<link rel="stylesheet" href="/css/bootstrap-theme.css">
		<link rel="stylesheet" href="/css/pui-v2.0.0/pivotal-ui.css">
		<link rel="stylesheet" href="/css/theme.css">
		<link rel="stylesheet" href="/css/component.css">

<link rel="stylesheet"  href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.1.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="/css/bootie-docs.css">
		<script src="http://raytheon.cfapps.io/js/modernizr.custom.js"></script>

		
		<style type="text/css">
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
		</style>
	</head>

<body role="document">
	
	
	<nav class="navbar navbar-inverse navbar-fixed-top  ">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<div class="nav navbar-brand">
						
							<img class="nav pivotal-logo" src="/Pivotal_Teal.png"/>
						
				</div>
				<a class="navbar-brand navbar-txt" href="/">Raytheon Pivotal Workshops </a>
			</div>
			<div id="navbar" class="navbar-collapse collapse">
				<ul class="nav navbar-nav">
			
				
				
					
					<li ><a class="navbar-txt" href="/lab_requirements">Lab_requirements</a></li>
				
					
					<li ><a class="navbar-txt" href="/billerica_day1">Billerica_day1</a></li>
				
					
					<li ><a class="navbar-txt" href="/billerica_day2">Billerica_day2</a></li>
				
					
					<li ><a class="navbar-txt" href="/billerica_day3">Billerica_day3</a></li>
				
					
					<li ><a class="navbar-txt" href="/cloud_tig">Cloud_tig</a></li>
				
			
			
				<li class="dropdown">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Resources<span class="caret"></span></a>
					<ul class="dropdown-menu" role="menu">
					
                        <li><a target="_blank" href="https://www.youtube.com/playlist?list=PLAdzTan_eSPQ1fuLSBhyB4eEZF7JQM0Mx">All SpringOne Conference Videos</a></li>
                     
                        <li><a target="_blank" href="http://pivotal.io/platform/pcf-tutorials/getting-started-with-pivotal-cloud-foundry-dev/introduction">Try PCF on your Local Workstation with PCF Dev</a></li>
                     
                        <li><a target="_blank" href="http://pivotal.io/platform/pcf-tutorials/getting-started-with-pivotal-cloud-foundry/introduction">Try PCF on the Public Cloud</a></li>
                     
                        <li><a target="_blank" href="/CorporateOverview.pdf">Pivotal Overview</a></li>
                     
                        <li><a target="_blank" href="https://network.pivotal.io/products/pcfdev">PCF Dev</a></li>
                     
                        <li><a target="_blank" href="https://docs.pivotal.io/pivotalcf">PCF Documentation</a></li>
                     
                        <li><a target="_blank" href="https://docs.pivotal.io/pivotalcf/cf-cli/getting-started.html">CF CLI Documentation</a></li>
                     
                        <li><a target="_blank" href="https://www.git-scm.com">Git</a></li>
                     
                        <li><a target="_blank" href="https://try.github.io/levels/1/challenges/1">Git Lessons</a></li>
                     
                        <li><a target="_blank" href="http://platform.spring.io/platform/">Spring Platform</a></li>
                     
                        <li><a target="_blank" href="https://spring.io/docs">Spring Docs</a></li>
                     
                        <li><a target="_blank" href="http://start.spring.io/">Spring Initializer</a></li>
                     
                        <li><a target="_blank" href="https://spring.io/blog/2015/10/19/springone2gx-2015-replay-spring-cloud-at-netflix">Spring Cloud at Netflix</a></li>
                     
                        <li><a target="_blank" href="https://spring.io/blog/2015/07/14/microservices-with-spring">Microservices with Spring</a></li>
                     
                        <li><a target="_blank" href="https://spring.io/guides#tutorials">Spring Guides</a></li>
                     
                        <li><a target="_blank" href="https://network.pivotal.io/">Pivotal Network</a></li>
                     
                        <li><a target="_blank" href="http://docs.pivotal.io">Pivotal Documentation</a></li>
                     
					</ul>
				</li>
			
			
				<li class="dropdown">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Books<span class="caret"></span></a>
					<ul class="dropdown-menu" role="menu">
					
                        <li><a target="_blank" href="/books/Beyond_the_12-Factor_App_Pivotal.pdf">Beyond the 12-Factor App</a></li>
                     
                        <li><a target="_blank" href="/books/Migrating_to_Cloud-Native_App_Architectures_Pivotal.pdf">Migrating to Cloud Native Application Architectures</a></li>
                     
                        <li><a target="_blank" href="/books/Cloud_Foundry_The_Cloud_Native_Platform_Pivotal.pdf">Cloud Foundry The Cloud Native Platform</a></li>
                     
                        <li><a target="_blank" href="http://www.amazon.com/Cloud-Native-Java-Designing-Resilient/dp/1449374646">Cloud Native Java: Designing Resilient Systems with Spring Boot, Spring Cloud, and Cloud Foundry</a></li>
                     
					</ul>
				</li>
			
				
                        
				</ul>
			</div>
		</div>
	</nav>

<div class="container" style="width:95%; padding:5">
	<div class="row">

	    		
		<div class="doc-sidebar" style="width:30%; margin-top:0; float:right; padding:10px;">
			<div class="sidebar-module">
				
		    	<div class="tag-box bg-dark-11" style="padding:10px; margin:20px;">
		    	<h4 class="type-brand-3">Books</h4>
		    	<ul class="list-unstyled">
		    	
		    	<li><a target="_blank" href="/books/Beyond_the_12-Factor_App_Pivotal.pdf">Beyond the 12-Factor App</a><p></p></li>	
		    	
		    	<li><a target="_blank" href="/books/Migrating_to_Cloud-Native_App_Architectures_Pivotal.pdf">Migrating to Cloud Native Application Architectures</a><p></p></li>	
		    	
		    	<li><a target="_blank" href="/books/Cloud_Foundry_The_Cloud_Native_Platform_Pivotal.pdf">Cloud Foundry The Cloud Native Platform</a><p></p></li>	
		    	
		    	<li><a target="_blank" href="http://www.amazon.com/Cloud-Native-Java-Designing-Resilient/dp/1449374646">Cloud Native Java: Designing Resilient Systems with Spring Boot, Spring Cloud, and Cloud Foundry</a><p></p></li>	
		    	
		    	</ul>
		  	</div>
                        <div class="tag-box bg-dark-11" style="padding:10px; margin:20px;">
                        <h4 class="type-brand-3">Resources</h4>
                        <ul class="list-unstyled">
                        
                            <li><a target="_blank" href="https://www.youtube.com/playlist?list=PLAdzTan_eSPQ1fuLSBhyB4eEZF7JQM0Mx">All SpringOne Conference Videos</a><p></p></li>
                        
                            <li><a target="_blank" href="http://pivotal.io/platform/pcf-tutorials/getting-started-with-pivotal-cloud-foundry-dev/introduction">Try PCF on your Local Workstation with PCF Dev</a><p></p></li>
                        
                            <li><a target="_blank" href="http://pivotal.io/platform/pcf-tutorials/getting-started-with-pivotal-cloud-foundry/introduction">Try PCF on the Public Cloud</a><p></p></li>
                        
                            <li><a target="_blank" href="/CorporateOverview.pdf">Pivotal Overview</a><p></p></li>
                        
                            <li><a target="_blank" href="https://network.pivotal.io/products/pcfdev">PCF Dev</a><p></p></li>
                        
                            <li><a target="_blank" href="https://docs.pivotal.io/pivotalcf">PCF Documentation</a><p></p></li>
                        
                            <li><a target="_blank" href="https://docs.pivotal.io/pivotalcf/cf-cli/getting-started.html">CF CLI Documentation</a><p></p></li>
                        
                            <li><a target="_blank" href="https://www.git-scm.com">Git</a><p></p></li>
                        
                            <li><a target="_blank" href="https://try.github.io/levels/1/challenges/1">Git Lessons</a><p></p></li>
                        
                            <li><a target="_blank" href="http://platform.spring.io/platform/">Spring Platform</a><p></p></li>
                        
                            <li><a target="_blank" href="https://spring.io/docs">Spring Docs</a><p></p></li>
                        
                            <li><a target="_blank" href="http://start.spring.io/">Spring Initializer</a><p></p></li>
                        
                            <li><a target="_blank" href="https://spring.io/blog/2015/10/19/springone2gx-2015-replay-spring-cloud-at-netflix">Spring Cloud at Netflix</a><p></p></li>
                        
                            <li><a target="_blank" href="https://spring.io/blog/2015/07/14/microservices-with-spring">Microservices with Spring</a><p></p></li>
                        
                            <li><a target="_blank" href="https://spring.io/guides#tutorials">Spring Guides</a><p></p></li>
                        
                            <li><a target="_blank" href="https://network.pivotal.io/">Pivotal Network</a><p></p></li>
                        
                            <li><a target="_blank" href="http://docs.pivotal.io">Pivotal Documentation</a><p></p></li>
                        
                        </ul>
                        </div>
			</div>
		</div>
		


		<div class="col-sm-8 doc-main" style="width:70%; float:left; padding:30px;">
			<main role="main">
				<article>
					<a id="title"></a>
					<div class="doc-entry-meta">
					</div>
					<section>
						<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The completed code for this lab can be found at <code>$COURSE_HOME/spring-boot-data/complete/springbox-catalog</code>.
</td>
</tr>
</table>
</div>
<div class="quoteblock abstract">
<blockquote>
<div class="dlist">
<dl>
<dt class="hdlist1">In this lab, we&#8217;ll do the following</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>we&#8217;ll utilize Spring Boot, Spring Data, and Spring Data REST to create a fully-functional hypermedia-driven RESTful web service.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>We&#8217;ll begin the first subproject of our complete cloud-native application architecture: <em>SpringBox</em>, which implements the movie browsing portion of a &#8220;Redbox-like&#8221; website.
This microservice will provide the <em>Movie Catalog Service</em>, which will allow us to browse movies by genre, browse an individual movie&#8217;s details, and search for movies.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll be using the <a href="http://grouplens.org/datasets/movielens/">MovieLens</a> dataset, and we&#8217;ll model it&#8217;s <code>Movie</code> and <code>Genre</code> concepts in this microservice.</p>
</div>
<hr>
<div class="paragraph">
<p><strong><strong>Approximate time: 20 minutes</strong></strong></p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_code_exercises_code"><code>Exercises</code></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_code_developing_the_service_code"><code>Developing the Service</code></h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Change to the lab directory:</p>
<div class="listingblock">
<div class="content">
<pre>$ cd $COURSE_HOME/spring-boot-data/initial/springbox-catalog</pre>
</div>
</div>
<div class="paragraph">
<p>and import the project (via <code>pom.xml</code>) into your IDE of choice.</p>
</div>
</li>
<li>
<p>Create the package <code>lab.domain</code> and in that package create the class <code>Genre</code>. Into that file you can paste the following source code, which models the MovieLens <code>Genre</code> concept:</p>
<div class="listingblock">
<div class="content">
<pre>@Entity
@Table(name = "genres")
public class Genre {

    @Id
    @GeneratedValue
    private Long id;

    @Column(nullable = false)
    private String mlId;

    @Column(nullable = false)
    private String name;

    @ManyToMany(mappedBy = "genres")
    @JsonIgnore
    private List&lt;Movie&gt; movies;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getMlId() {
        return mlId;
    }

    public void setMlId(String mlId) {
        this.mlId = mlId;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public List&lt;Movie&gt; getMovies() {
        return movies;
    }

    public void setMovies(List&lt;Movie&gt; movies) {
        this.movies = movies;
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>Notice that we&#8217;re using JPA annotations on the class and its fields. You&#8217;ll need to use your IDE&#8217;s features to add the appropriate import statements.
This class won&#8217;t compile just yet, and we&#8217;ll fix that in the next step.</p>
</div>
</li>
<li>
<p>Also in the <code>lab.domain</code> package,  create the class <code>Movie</code>. Into that file you can paste the following source code, which models the MovieLens <code>Movie</code> concept:</p>
<div class="listingblock">
<div class="content">
<pre>@Entity
@Table(name = "movies")
public class Movie {

    @Id
    @GeneratedValue
    private Long id;

    @Column(nullable = false)
    private String title;

    @Column(nullable = false)
    private String mlId;

    @ManyToMany(cascade = CascadeType.ALL)
    @JoinTable(name = "movies_genres",
            joinColumns = {@JoinColumn(name = "movie_id", referencedColumnName = "id")},
            inverseJoinColumns = {@JoinColumn(name = "genre_id", referencedColumnName = "id")})
    private List&lt;Genre&gt; genres;

    @Column(nullable = false)
    private int numberInStock;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public List&lt;Genre&gt; getGenres() {
        return genres;
    }

    public void setGenres(List&lt;Genre&gt; genres) {
        this.genres = genres;
    }

    public String getMlId() {
        return mlId;
    }

    public void setMlId(String mlId) {
        this.mlId = mlId;
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>Once again, use the IDE to add the appropriate import statements.
At this point, both <code>Movie</code> and <code>Genre</code> should compile.</p>
</div>
</li>
<li>
<p>Create the package <code>lab.repositories</code> and in that package create the interface <code>GenreRepository</code>. Paste the following code and add appropriate imports:</p>
<div class="listingblock">
<div class="content">
<pre>public interface GenreRepository extends PagingAndSortingRepository&lt;Genre, Long&gt; {
}</pre>
</div>
</div>
</li>
<li>
<p>Also in the <code>lab.repositories</code> package,  create the interface <code>MovieRepository</code>. Paste the following code and add appropriate imports:</p>
<div class="listingblock">
<div class="content">
<pre>public interface MovieRepository extends PagingAndSortingRepository&lt;Movie, Long&gt; {
}</pre>
</div>
</div>
</li>
<li>
<p>Create a file <code>src/main/resources/import.sql</code>, and enter the following values in it:</p>
<div class="listingblock">
<div class="content">
<pre>insert into genres (name,ml_id,id) values ('unknown',0,1000);
insert into genres (name,ml_id,id) values ('Action',1,1001);
insert into genres (name,ml_id,id) values ('Adventure',2,1002);
insert into genres (name,ml_id,id) values ('Animation',3,1003);
insert into genres (name,ml_id,id) values ('Children''s',4,1004);
insert into genres (name,ml_id,id) values ('Comedy',5,1005);
insert into genres (name,ml_id,id) values ('Crime',6,1006);
insert into genres (name,ml_id,id) values ('Documentary',7,1007);
insert into genres (name,ml_id,id) values ('Drama',8,1008);
insert into genres (name,ml_id,id) values ('Fantasy',9,1009);
insert into genres (name,ml_id,id) values ('Film-Noir',10,1010);
insert into genres (name,ml_id,id) values ('Horror',11,1011);
insert into genres (name,ml_id,id) values ('Musical',12,1012);
insert into genres (name,ml_id,id) values ('Mystery',13,1013);
insert into genres (name,ml_id,id) values ('Romance',14,1014);
insert into genres (name,ml_id,id) values ('Sci-Fi',15,1015);
insert into genres (name,ml_id,id) values ('Thriller',16,1016);
insert into genres (name,ml_id,id) values ('War',17,1017);
insert into genres (name,ml_id,id) values ('Western',18,1018);

insert into movies(id,title,ml_id,number_in_stock) values (1000,'Toy Story (1995)','1',10);
insert into movies_genres(movie_id, genre_id) values (1000,1003);
insert into movies_genres(movie_id, genre_id) values (1000,1004);
insert into movies_genres(movie_id, genre_id) values (1000,1005);
insert into movies(id,title,ml_id,number_in_stock) values (1001,'GoldenEye (1995)','2',10);
insert into movies_genres(movie_id, genre_id) values (1001,1001);
insert into movies_genres(movie_id, genre_id) values (1001,1002);
insert into movies_genres(movie_id, genre_id) values (1001,1016);
insert into movies(id,title,ml_id,number_in_stock) values (1002,'Four Rooms (1995)','3',10);
insert into movies_genres(movie_id, genre_id) values (1002,1016);
insert into movies(id,title,ml_id,number_in_stock) values (1003,'Get Shorty (1995)','4',10);
insert into movies_genres(movie_id, genre_id) values (1003,1001);
insert into movies_genres(movie_id, genre_id) values (1003,1005);
insert into movies_genres(movie_id, genre_id) values (1003,1008);
insert into movies(id,title,ml_id,number_in_stock) values (1004,'Copycat (1995)','5',10);
insert into movies_genres(movie_id, genre_id) values (1004,1006);
insert into movies_genres(movie_id, genre_id) values (1004,1008);
insert into movies_genres(movie_id, genre_id) values (1004,1016);
insert into movies(id,title,ml_id,number_in_stock) values (1005,'Shanghai Triad (Yao a yao yao dao waipo qiao) (1995)','6',10);
insert into movies_genres(movie_id, genre_id) values (1005,1008);
insert into movies(id,title,ml_id,number_in_stock) values (1006,'Twelve Monkeys (1995)','7',10);
insert into movies_genres(movie_id, genre_id) values (1006,1008);
insert into movies_genres(movie_id, genre_id) values (1006,1015);
insert into movies(id,title,ml_id,number_in_stock) values (1007,'Babe (1995)','8',10);
insert into movies_genres(movie_id, genre_id) values (1007,1004);
insert into movies_genres(movie_id, genre_id) values (1007,1005);
insert into movies_genres(movie_id, genre_id) values (1007,1008);
insert into movies(id,title,ml_id,number_in_stock) values (1008,'Dead Man Walking (1995)','9',10);
insert into movies_genres(movie_id, genre_id) values (1008,1008);
insert into movies(id,title,ml_id,number_in_stock) values (1009,'Richard III (1995)','10',10);
insert into movies_genres(movie_id, genre_id) values (1009,1008);
insert into movies_genres(movie_id, genre_id) values (1009,1017);
insert into movies(id,title,ml_id,number_in_stock) values (1010,'Seven (Se7en) (1995)','11',10);
insert into movies_genres(movie_id, genre_id) values (1010,1006);
insert into movies_genres(movie_id, genre_id) values (1010,1016);
insert into movies(id,title,ml_id,number_in_stock) values (1011,'Usual Suspects, The (1995)','12',10);
insert into movies_genres(movie_id, genre_id) values (1011,1006);
insert into movies_genres(movie_id, genre_id) values (1011,1016);
insert into movies(id,title,ml_id,number_in_stock) values (1012,'Mighty Aphrodite (1995)','13',10);
insert into movies_genres(movie_id, genre_id) values (1012,1005);
insert into movies(id,title,ml_id,number_in_stock) values (1013,'Postino, Il (1994)','14',10);
insert into movies_genres(movie_id, genre_id) values (1013,1008);
insert into movies_genres(movie_id, genre_id) values (1013,1014);
insert into movies(id,title,ml_id,number_in_stock) values (1014,'Mr. Holland''s Opus (1995)','15',10);
insert into movies_genres(movie_id, genre_id) values (1014,1008);
insert into movies(id,title,ml_id,number_in_stock) values (1015,'French Twist (Gazon maudit) (1995)','16',10);
insert into movies_genres(movie_id, genre_id) values (1015,1005);
insert into movies_genres(movie_id, genre_id) values (1015,1014);
insert into movies(id,title,ml_id,number_in_stock) values (1016,'From Dusk Till Dawn (1996)','17',10);
insert into movies_genres(movie_id, genre_id) values (1016,1001);
insert into movies_genres(movie_id, genre_id) values (1016,1005);
insert into movies_genres(movie_id, genre_id) values (1016,1006);
insert into movies_genres(movie_id, genre_id) values (1016,1011);
insert into movies_genres(movie_id, genre_id) values (1016,1016);
insert into movies(id,title,ml_id,number_in_stock) values (1017,'White Balloon, The (1995)','18',10);
insert into movies_genres(movie_id, genre_id) values (1017,1008);
insert into movies(id,title,ml_id,number_in_stock) values (1018,'Antonia''s Line (1995)','19',10);
insert into movies_genres(movie_id, genre_id) values (1018,1008);
insert into movies(id,title,ml_id,number_in_stock) values (1019,'Angels and Insects (1995)','20',10);
insert into movies_genres(movie_id, genre_id) values (1019,1008);
insert into movies_genres(movie_id, genre_id) values (1019,1014);
insert into movies(id,title,ml_id,number_in_stock) values (1020,'Muppet Treasure Island (1996)','21',10);
insert into movies_genres(movie_id, genre_id) values (1020,1001);
insert into movies_genres(movie_id, genre_id) values (1020,1002);
insert into movies_genres(movie_id, genre_id) values (1020,1005);
insert into movies_genres(movie_id, genre_id) values (1020,1012);
insert into movies_genres(movie_id, genre_id) values (1020,1016);
insert into movies(id,title,ml_id,number_in_stock) values (1021,'Braveheart (1995)','22',10);
insert into movies_genres(movie_id, genre_id) values (1021,1001);
insert into movies_genres(movie_id, genre_id) values (1021,1008);
insert into movies_genres(movie_id, genre_id) values (1021,1017);
insert into movies(id,title,ml_id,number_in_stock) values (1022,'Taxi Driver (1976)','23',10);
insert into movies_genres(movie_id, genre_id) values (1022,1008);
insert into movies_genres(movie_id, genre_id) values (1022,1016);
insert into movies(id,title,ml_id,number_in_stock) values (1023,'Rumble in the Bronx (1995)','24',10);
insert into movies_genres(movie_id, genre_id) values (1023,1001);
insert into movies_genres(movie_id, genre_id) values (1023,1002);
insert into movies_genres(movie_id, genre_id) values (1023,1006);
insert into movies(id,title,ml_id,number_in_stock) values (1024,'Birdcage, The (1996)','25',10);
insert into movies_genres(movie_id, genre_id) values (1024,1005);
insert into movies(id,title,ml_id,number_in_stock) values (1025,'Brothers McMullen, The (1995)','26',10);
insert into movies_genres(movie_id, genre_id) values (1025,1005);
insert into movies(id,title,ml_id,number_in_stock) values (1026,'Bad Boys (1995)','27',10);
insert into movies_genres(movie_id, genre_id) values (1026,1001);
insert into movies(id,title,ml_id,number_in_stock) values (1027,'Apollo 13 (1995)','28',10);
insert into movies_genres(movie_id, genre_id) values (1027,1001);
insert into movies_genres(movie_id, genre_id) values (1027,1008);
insert into movies_genres(movie_id, genre_id) values (1027,1016);</pre>
</div>
</div>
</li>
<li>
<p>Run the application:</p>
<div class="listingblock">
<div class="content">
<pre>$ mvn spring-boot:run</pre>
</div>
</div>
</li>
<li>
<p>Access the application. In a browser go to</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="http://localhost:8080/movies/1000" class="bare">http://localhost:8080/movies/1000</a></dt>
<dd>
<p>Or using <code>curl</code> to make sure everything is working properly.</p>
<div class="paragraph">
<p>You see see output similar to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>→curl  http://localhost:8080/movies/1000
{
  "title" : "Toy Story (1995)",
  "mlId" : "1",
  "numberInStock" : 10,
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/movies/1000"
    },
    "movie" : {
      "href" : "http://localhost:8080/movies/1000"
    },
    "genres" : {
      "href" : "http://localhost:8080/movies/1000/genres"
    }
  }
}</pre>
</div>
</div>
</dd>
</dl>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>

					</section>
				</article>
			</main>
		</div> 
	</div> 
</div>

		




<hr />
<div class="container">
	<div class="row">
		<div class="col-sm-8">
			<p class="doc-footer-em"><a href="#">Back to TOP</a></p>
		</div>
	</div>

</div> 
          
<footer class="doc-footer">
        <span>Last Updated on  2016-05-11 06:07:56 -0400 EDT  </span>
	
	<p>Copyright (c) 2015, Pivotal; All rights reserved.</p>
</footer>



<script src="/js/jquery-1.11.2.min.js"></script>
<script src="/js/bootstrap.min.js"></script>

<script src="/js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="/js/ie10-viewport-bug-workaround.js"></script>
		<script>
			var $event = $.event,
			$special,
			resizeTimeout;
			$special = $event.special.debouncedresize = {
				setup: function() {
					$( this ).on( "resize", $special.handler );
				},
				teardown: function() {
					$( this ).off( "resize", $special.handler );
				},
				handler: function( event, execAsap ) {
					var context = this,
						args = arguments,
						dispatch = function() {
							event.type = "debouncedresize";
							$event.dispatch.apply( context, args );
						};
					if ( resizeTimeout ) {
						clearTimeout( resizeTimeout );
					}
					execAsap ?
						dispatch() :
						resizeTimeout = setTimeout( dispatch, $special.threshold );
				},
				threshold: 250
			};
			var BLANK = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==';
			$.fn.imagesLoaded = function( callback ) {
				var $this = this,
					deferred = $.isFunction($.Deferred) ? $.Deferred() : 0,
					hasNotify = $.isFunction(deferred.notify),
					$images = $this.find('img').add( $this.filter('img') ),
					loaded = [],
					proper = [],
					broken = [];
				if ($.isPlainObject(callback)) {
					$.each(callback, function (key, value) {
						if (key === 'callback') {
							callback = value;
						} else if (deferred) {
							deferred[key](value);
						}
					});
				}
				function doneLoading() {
					var $proper = $(proper),
						$broken = $(broken);
					if ( deferred ) {
						if ( broken.length ) {
							deferred.reject( $images, $proper, $broken );
						} else {
							deferred.resolve( $images );
						}
					}
					if ( $.isFunction( callback ) ) {
						callback.call( $this, $images, $proper, $broken );
					}
				}
				function imgLoaded( img, isBroken ) {
					if ( img.src === BLANK || $.inArray( img, loaded ) !== -1 ) {
						return;
					}
					loaded.push( img );
					if ( isBroken ) {
						broken.push( img );
					} else {
						proper.push( img );
					}
					$.data( img, 'imagesLoaded', { isBroken: isBroken, src: img.src } );
					if ( hasNotify ) {
						deferred.notifyWith( $(img), [ isBroken, $images, $(proper), $(broken) ] );
					}
					if ( $images.length === loaded.length ){
						setTimeout( doneLoading );
						$images.unbind( '.imagesLoaded' );
					}
				}
				if ( !$images.length ) {
					doneLoading();
				} else {
					$images.bind( 'load.imagesLoaded error.imagesLoaded', function( event ){
						imgLoaded( event.target, event.type === 'error' );
					}).each( function( i, el ) {
						var src = el.src;
						var cached = $.data( el, 'imagesLoaded' );
						if ( cached && cached.src === src ) {
							imgLoaded( el, cached.isBroken );
							return;
						}
						if ( el.complete && el.naturalWidth !== undefined ) {
							imgLoaded( el, el.naturalWidth === 0 || el.naturalHeight === 0 );
							return;
						}
						if ( el.readyState || el.complete ) {
							el.src = BLANK;
							el.src = src;
						}
					});
				}
				return deferred ? deferred.promise( $this ) : $this;
			};
			var Grid = (function() {
				var $grid = $( '#og-grid' ),
					$items = $grid.children( 'li' ),
					current = -1,
					previewPos = -1,
					scrollExtra = 0,
					marginExpanded = 10,
					$window = $( window ), winsize,
					$body = $( 'html, body' ),
					transEndEventNames = {
						'WebkitTransition' : 'webkitTransitionEnd',
						'MozTransition' : 'transitionend',
						'OTransition' : 'oTransitionEnd',
						'msTransition' : 'MSTransitionEnd',
						'transition' : 'transitionend'
					},
					transEndEventName = transEndEventNames[ Modernizr.prefixed( 'transition' ) ],
					support = Modernizr.csstransitions,
					settings = {
						minHeight : 500,
						speed : 350,
						easing : 'ease'
					};
				function init( config ) {
					
					settings = $.extend( true, {}, settings, config );
					$grid.imagesLoaded( function() {
						saveItemInfo( true );
						getWinSize();
						initEvents();
					} );
				}
				function addItems( $newitems ) {
					$items = $items.add( $newitems );
					$newitems.each( function() {
						var $item = $( this );
						$item.data( {
							offsetTop : $item.offset().top,
							height : $item.height()
						} );
					} );
					initItemsEvents( $newitems );
				}
				function saveItemInfo( saveheight ) {
					$items.each( function() {
						var $item = $( this );
						$item.data( 'offsetTop', $item.offset().top );
						if( saveheight ) {
							$item.data( 'height', $item.height() );
						}
					} );
				}
				function initEvents() {
					
					initItemsEvents( $items );
					
					$window.on( 'debouncedresize', function() {
						
						scrollExtra = 0;
						previewPos = -1;
						saveItemInfo();
						getWinSize();
						var preview = $.data( this, 'preview' );
						if( typeof preview != 'undefined' ) {
							hidePreview();
						}
					} );
				}
				function initItemsEvents( $items ) {
					$items.on( 'click', 'span.og-close', function() {
						hidePreview();
						return false;
					} ).children( 'a' ).on( 'click', function(e) {
						var $item = $( this ).parent();
						current === $item.index() ? hidePreview() : showPreview( $item );
						return false;
					} );
				}
				function getWinSize() {
					winsize = { width : $window.width(), height : $window.height() };
				}
				function showPreview( $item ) {
					var preview = $.data( this, 'preview' ),
						position = $item.data( 'offsetTop' );
					scrollExtra = 0;
					if( typeof preview != 'undefined' ) {
						if( previewPos !== position ) {
							if( position > previewPos ) {
								scrollExtra = preview.height;
							}
							hidePreview();
						}
						else {
							preview.update( $item );
							return false;
						}
						
					}
					previewPos = position;
					preview = $.data( this, 'preview', new Preview( $item ) );
					preview.open();
				}
				function hidePreview() {
					current = -1;
					var preview = $.data( this, 'preview' );
					preview.close();
					$.removeData( this, 'preview' );
				}
				function Preview( $item ) {
					this.$item = $item;
					this.expandedIdx = this.$item.index();
					this.create();
					this.update();
				}
				Preview.prototype = {
					create : function() {
						this.$title = $( '<h3></h3>' );
						this.$description = $( '<p></p>' );
						this.$href = $( '<a href="#"></a>' );
						this.$details = $( '<div class="og-details"></div>' ).append( this.$title, this.$description, this.$href );
						this.$loading = $( '<div class="og-loading"></div>' );
						this.$fullimage = $( '<div class="og-fullimg"></div>' ).append( this.$loading );
						this.$closePreview = $( '<span class="og-close"></span>' );
						this.$previewInner = $( '<div class="og-expander-inner"></div>' ).append( this.$closePreview, this.$fullimage, this.$details );
						this.$previewEl = $( '<div class="og-expander"></div>' ).append( this.$previewInner );
						this.$item.append( this.getEl() );
						if( support ) {
							this.setTransition();
						}
					},
					update : function( $item ) {
						if( $item ) {
							this.$item = $item;
						}
						
						if( current !== -1 ) {
							var $currentItem = $items.eq( current );
							$currentItem.removeClass( 'og-expanded' );
							this.$item.addClass( 'og-expanded' );
							this.positionPreview();
						}
						current = this.$item.index();
						var $itemEl = this.$item.children( 'a' ),
							eldata = {
								href : $itemEl.attr( 'href' ),
								largesrc : $itemEl.data( 'largesrc' ),
								title : $itemEl.data( 'title' ),
								description : $itemEl.data( 'description' )
							};
						this.$title.html( eldata.title );
						this.$description.html( eldata.description );
						this.$href.attr( 'href', eldata.href );
						var self = this;
						
						if( typeof self.$largeImg != 'undefined' ) {
							self.$largeImg.remove();
						}
						if( self.$fullimage.is( ':visible' ) ) {
							this.$loading.show();
							$( '<img/>' ).load( function() {
								var $img = $( this );
								if( $img.attr( 'src' ) === self.$item.children('a').data( 'largesrc' ) ) {
									self.$loading.hide();
									self.$fullimage.find( 'img' ).remove();
									self.$largeImg = $img.fadeIn( 350 );
									self.$fullimage.append( self.$largeImg );
								}
							} ).attr( 'src', eldata.largesrc );	
						}
					},
					open : function() {
						setTimeout( $.proxy( function() {	
							this.setHeights();
							this.positionPreview();
						}, this ), 25 );
					},
					close : function() {
						var self = this,
							onEndFn = function() {
								if( support ) {
									$( this ).off( transEndEventName );
								}
								self.$item.removeClass( 'og-expanded' );
								self.$previewEl.remove();
							};
						setTimeout( $.proxy( function() {
							if( typeof this.$largeImg !== 'undefined' ) {
								this.$largeImg.fadeOut( 'fast' );
							}
							this.$previewEl.css( 'height', 0 );
							var $expandedItem = $items.eq( this.expandedIdx );
							$expandedItem.css( 'height', $expandedItem.data( 'height' ) ).on( transEndEventName, onEndFn );
							if( !support ) {
								onEndFn.call();
							}
						}, this ), 25 );
						
						return false;
					},
					calcHeight : function() {
						var heightPreview = winsize.height - this.$item.data( 'height' ) - marginExpanded,
							itemHeight = winsize.height;
						if( heightPreview < settings.minHeight ) {
							heightPreview = settings.minHeight;
							itemHeight = settings.minHeight + this.$item.data( 'height' ) + marginExpanded;
						}
						this.height = heightPreview;
						this.itemHeight = itemHeight;
					},
					setHeights : function() {
						var self = this,
							onEndFn = function() {
								if( support ) {
									self.$item.off( transEndEventName );
								}
								self.$item.addClass( 'og-expanded' );
							};
						this.calcHeight();
						this.$previewEl.css( 'height', this.height );
						this.$item.css( 'height', this.itemHeight ).on( transEndEventName, onEndFn );
						if( !support ) {
							onEndFn.call();
						}
					},
					positionPreview : function() {
						var position = this.$item.data( 'offsetTop' ),
							previewOffsetT = this.$previewEl.offset().top - scrollExtra,
							scrollVal = this.height + this.$item.data( 'height' ) + marginExpanded <= winsize.height ? position : this.height < winsize.height ? previewOffsetT - ( winsize.height - this.height ) : previewOffsetT;
						
						$body.animate( { scrollTop : scrollVal }, settings.speed );
					},
					setTransition  : function() {
						this.$previewEl.css( 'transition', 'height ' + settings.speed + 'ms ' + settings.easing );
						this.$item.css( 'transition', 'height ' + settings.speed + 'ms ' + settings.easing );
					},
					getEl : function() {
						return this.$previewEl;
					}
				}
				return { 
					init : init,
					addItems : addItems
				};
			})();
		</script>
		<script>
			$(function() {
				Grid.init();
			});
		</script>
</body>
</html>

